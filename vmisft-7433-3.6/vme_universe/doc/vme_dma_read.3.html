<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>vme_dma_read.3</title>
</head>
<body>
<h2>NAME</h2>
<p><b>vme_dma_read</b> - Reads data from the VMEbus using DMA or programmed I/O.
</p>
<h2>SYNOPSIS</h2>
<b>int vme_dma_read
(
vme_bus_handle_t bus_handle, vme_dma_handle_t dma_handle, unsigned long offset, uint64_t vme_addr, int am, size_t nbytes, int flags
)
</b><h2>PARAMETERS</h2>
<dl>
<dt><b>vme_bus_handle_t bus_handle</b></dt>
<dd><p>Handle allocated by <a href="vme_master_init.3.html">vme_master_init</a>
</p></dd>
<dt><b>vme_dma_handle_t dma_handle</b></dt>
<dd><p>Handle to a DMA buffer allocated by <a href="vme_dma_buffer_create.3.html">vme_dma_buffer_create</a>.
</p></dd>
<dt><b>unsigned long offset</b></dt>
<dd><p>Offset from the buffer base address. The first byte of data read is stored at this address.
</p></dd>
<dt><b>uint64_t vme_addr</b></dt>
<dd><p>VMEbus address.
</p></dd>
<dt><b>int am</b></dt>
<dd>
<p>Address modifier. Possible values are:</p>
- VME_A16S - Short supervisory access.<br>
- VME_A16U - Short nonprivileged access<br>
- VME_A24SB - Standard supervisory block transfer<br>
- VME_A24SD - Standard supervisory data access<br>
- VME_A24SMB - Standard supervisory multiplex block transfer<br>
- VME_A24SP - Standard supervisory program access<br>
- VME_A24UB - Standard nonprivileged block transfer<br>
- VME_A24UD - Standard nonprivileged data access<br>
- VME_A24UMB - Standard nonprivileged multiplex block transfer<br>
- VME_A24UP - Standard nonprivileged program access<br>
- VME_A32SB - Extended supervisory block transfer<br>
- VME_A32SD - Extended supervisory data access<br>
- VME_A32SMB - Extended supervisory multiplex block transfer<br>
- VME_A32SP - Extended supervisory program access<br>
- VME_A32UB - Extended nonprivileged block transfer<br>
- VME_A32UD - Extended nonprivileged data access<br>
- VME_A32UMB - Extended nonprivileged multiplex block transfer<br>
- VME_A32UP - Extended nonprivileged program access<br>
</dd>
<dt><b>size_t nbytes</b></dt>
<dd><p>Number of bytes of data to transfer.
</p></dd>
<dt><b>int flags</b></dt>
<dd>
<p>Flags used to indicate special transfer features. The value specified will be an "OR" of the following possible values for the Tundra Universe II device.
</p>
- VME_DMA_64_BIT - Enable 64-bit PCI bus transfers<br><p>One of the following data widths can be used. If a data width is not specified, a default value is chosen based on the address modifier:
</p>
- VME_DMA_DW_8<br>
- VME_DMA_DW_16<br>
- VME_DMA_DW_32<br>
- VME_DMA_DW_64<br><p>One of the following settings of the VON counter can be used, to indicates how many bytes of data to transfer before the bus is released. If a flag is not specified, the bus is held until the transfer completes.
</p>
- VME_DMA_VON_256<br>
- VME_DMA_VON_512<br>
- VME_DMA_VON_1024<br>
- VME_DMA_VON_2048<br>
- VME_DMA_VON_4096<br>
- VME_DMA_VON_8192<br>
- VME_DMA_VON_16384<br><p>One of the following settings of the VOFF counter can be used, to indicates how many microseconds to wait before reaquiring the bus. If a flag is not specified, the bus is immediately re-requested.
</p>
- VME_DMA_VOFF_16<br>
- VME_DMA_VOFF_32<br>
- VME_DMA_VOFF_64<br>
- VME_DMA_VOFF_128<br>
- VME_DMA_VOFF_256<br>
- VME_DMA_VOFF_512<br>
- VME_DMA_VOFF_1024<br>
- VME_DMA_VOFF_2000<br>
- VME_DMA_VOFF_4000<br>
- VME_DMA_VOFF_8000<br>
</dd>
</dl>
<h2>DESCRIPTION</h2>
<p>Reads data from the VMEbus using DMA or programmed I/O. The DMA engine is used to read data from the VMEbus into a specified DMA buffer. If the addresses have not the same alignement, programmed I/O is used.
</p>
<h2>RETURNS</h2>
<p>
<p>0 on success, or -1 on failure.
</p>
</p>
<h2>NOTES</h2>
<p>Not all max data widths are available for all address modifiers.
</p>
<p>The default max data width is the maximum available width for the given address modifier.
</p>
<h2>SEE ALSO</h2>
<a href="vme_dma_buffer_create.3.html">vme_dma_buffer_create</a>(3), <a href="vme_dma_buffer_map.3.html">vme_dma_buffer_map</a>(3), <a href="vme_dma_buffer_phys_addr.3.html">vme_dma_buffer_phys_addr</a>(3), <a href="vme_dma_buffer_release.3.html">vme_dma_buffer_release</a>(3), <a href="vme_dma_buffer_unmap.3.html">vme_dma_buffer_unmap</a>(3), <a href="vme_dma_write.3.html">vme_dma_write</a>(3)</body>
</html>
